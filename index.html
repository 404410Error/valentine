<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Will you be my Valentine?</title>

<style>
:root{
  --bg1:#f7c3d9;
  --bg2:#eaa0c2;
  --card:#f6f2f2;
  --text:#111;
  --muted:#8f8f8f;
  --yes:#e61b6a;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  background: radial-gradient(circle at 50% 30%, var(--bg1), var(--bg2));
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  overflow:hidden;
  padding:24px;
}

/* ðŸŒ¸ FAST Sakura canvas layer */
#sakuraCanvas{
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  z-index:1;
  pointer-events:none;
}

/* Card */
.card{
  position:relative;
  z-index:2;
  width:min(760px, 94vw);
  background:var(--card);
  border-radius:22px;
  box-shadow:0 20px 60px rgba(0,0,0,.25);
  padding:36px 28px 22px;
  text-align:center;
}

/* Icon */
.icon{
  width:72px;
  height:72px;
  object-fit:contain;
  margin:0 auto 16px;
  display:block;
}

/* Title */
h1{
  margin:0 0 22px;
  font-size:clamp(22px, 3.5vw, 34px);
  font-weight:800;
  text-transform:lowercase;
  color:var(--text);
}

/* Buttons */
.controls{
  position:relative;
  width:420px;
  max-width:100%;
  height:90px;
  margin:0 auto;
}

#yes{
  position:absolute;
  left:40px;
  top:18px;
  border:0;
  border-radius:999px;
  padding:14px 36px;
  font-size:18px;
  font-weight:800;
  cursor:pointer;
  background:var(--yes);
  color:white;
  box-shadow:0 18px 36px rgba(230,27,106,.35);
}
#yes:active{ transform:scale(.97); }

#no{
  position:absolute;
  left:300px;
  top:36px;
  border:0;
  background:none;
  padding:6px 10px;
  font-size:13px;
  color:var(--muted);
  cursor:pointer;
  transition:left .12s ease, top .12s ease;
  touch-action:manipulation;
}

.caption{
  margin-top:14px;
  font-size:12px;
  color:#555;
}

#result{
  margin-top:14px;
  min-height:22px;
  font-weight:800;
}
</style>
</head>

<body>

<canvas id="sakuraCanvas"></canvas>

<main class="card">
  <img class="icon" src="Icon.png" alt="icon">

  <h1 id="title">priya will you be my valentine?</h1>

  <div class="controls" id="arena">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>

  <div class="caption">"No" seems a bit shy ðŸ˜ˆ</div>
  <div id="result"></div>
</main>

<script>
/* =====================
   NAME
===================== */
const name = "Priya";
document.getElementById("title").textContent =
  `${name.toLowerCase()} will you be my valentine?`;

/* =====================
   YES
===================== */
document.getElementById("yes").onclick = () => {
  document.getElementById("result").textContent = "Yaaay ðŸ’";
};

/* =====================
   NO ESCAPE
===================== */
const no = document.getElementById("no");
const arena = document.getElementById("arena");
function clamp(v,min,max){ return Math.max(min, Math.min(max, v)); }
function fleeRandom(){
  const a = arena.getBoundingClientRect();
  const b = no.getBoundingClientRect();
  const nx = clamp(Math.random()*(a.width-b.width), 10, a.width-b.width-10);
  const ny = clamp(Math.random()*(a.height-b.height), 10, a.height-b.height-10);
  no.style.left = nx + "px";
  no.style.top  = ny + "px";
}
no.addEventListener("mouseenter", fleeRandom);
no.addEventListener("touchstart", (e)=>{ e.preventDefault(); fleeRandom(); }, {passive:false});

/* =====================
   ðŸŒ¸ FAST CANVAS SAKURA BLIZZARD
   (real petal shape + glow, super smooth)
===================== */
const canvas = document.getElementById("sakuraCanvas");
const ctx = canvas.getContext("2d");

let W = 0, H = 0, DPR = 1;

function resize(){
  DPR = Math.min(2, window.devicePixelRatio || 1); // cap DPR for performance
  W = window.innerWidth;
  H = window.innerHeight;
  canvas.width  = Math.floor(W * DPR);
  canvas.height = Math.floor(H * DPR);
  canvas.style.width = W + "px";
  canvas.style.height = H + "px";
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
window.addEventListener("resize", resize);
resize();

function rand(min,max){ return Math.random()*(max-min)+min; }

// --- Pre-render petal sprites (2 variants) ---
function makePetalSprite(size, variant){
  const off = document.createElement("canvas");
  off.width = off.height = size;
  const c = off.getContext("2d");
  c.translate(size/2, size/2);

  // glow base (draw behind)
  c.globalAlpha = 0.35;
  c.fillStyle = "rgba(255,255,255,0.9)";
  c.beginPath();
  c.ellipse(0, 0, size*0.26, size*0.18, 0, 0, Math.PI*2);
  c.fill();

  // petal gradient
  const g = c.createLinearGradient(0, -size*0.35, 0, size*0.35);
  g.addColorStop(0,   "#fff6fb");
  g.addColorStop(0.55,"#ffb5d6");
  g.addColorStop(1,   variant === 0 ? "#f06aa9" : "#ea4f9a");

  c.globalAlpha = 1;
  c.fillStyle = g;

  // petal shape
  c.beginPath();
  c.moveTo(0, -size*0.40);
  c.bezierCurveTo(size*0.36, -size*0.22, size*0.46, size*0.22, 0, size*0.44);
  c.bezierCurveTo(-size*0.46, size*0.22, -size*0.36, -size*0.22, 0, -size*0.40);
  c.closePath();
  c.fill();

  // highlight streak
  c.globalAlpha = 0.30;
  c.fillStyle = "rgba(255,255,255,0.95)";
  c.beginPath();
  c.ellipse(-size*0.07, -size*0.10, size*0.12, size*0.20, -0.4, 0, Math.PI*2);
  c.fill();

  return off;
}

const SPRITES = [];
for (let i=0; i<6; i++){
  const s = 40 + i*8; // 40..80
  SPRITES.push(makePetalSprite(s, 0));
  SPRITES.push(makePetalSprite(s, 1));
}

// Petal physics
const petals = [];
let targetCount = 0;

function recomputeCount(){
  // density scales with area, capped for performance
  const area = W * H;
  const base = area / 16000; // tweak density
  targetCount = Math.max(90, Math.min(260, Math.floor(base)));
}
recomputeCount();

window.addEventListener("resize", () => {
  recomputeCount();
  // gently adjust array length
  if (petals.length > targetCount) petals.length = targetCount;
});

// Create a petal
function newPetal(spawnTop=false){
  const sprite = SPRITES[Math.floor(Math.random()*SPRITES.length)];
  return {
    sprite,
    x: rand(0, W),
    y: spawnTop ? rand(-H, 0) : rand(0, H),
    vy: rand(0.8, 2.6),
    vx: rand(-0.8, 0.8),
    wob: rand(0, Math.PI*2),
    wobSpd: rand(0.008, 0.03),
    drift: rand(-1.2, 1.2),
    rot: rand(0, Math.PI*2),
    rotSpd: rand(-0.03, 0.03),
    alpha: rand(0.75, 1.0),
    scale: rand(0.55, 1.15),
  };
}

// init petals
while (petals.length < targetCount) petals.push(newPetal(true));

let last = performance.now();

function frame(now){
  const dt = Math.min(32, now - last) / 16.6667; // normalize ~60fps
  last = now;

  ctx.clearRect(0,0,W,H);

  // global glow softening
  // (keep small for perf)
  ctx.globalCompositeOperation = "source-over";

  for (let i=0; i<petals.length; i++){
    const p = petals[i];

    p.wob += p.wobSpd * dt;
    p.rot += p.rotSpd * dt;

    // snowstorm wind: sine + drift
    const wind = Math.sin(p.wob) * 1.4 + p.drift;
    p.x += (p.vx + wind) * dt * 1.8;
    p.y += p.vy * dt * 1.6;

    // wrap / respawn
    if (p.y > H + 80){
      petals[i] = newPetal(true);
      continue;
    }
    if (p.x < -100) p.x = W + 100;
    if (p.x > W + 100) p.x = -100;

    // draw with glow: draw sprite twice (soft halo + main)
    const img = p.sprite;
    const w = img.width * p.scale;
    const h = img.height * p.scale;

    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.rot);

    // halo
    ctx.globalAlpha = p.alpha * 0.35;
    ctx.shadowColor = "rgba(255, 220, 238, 0.95)";
    ctx.shadowBlur = 18;
    ctx.drawImage(img, -w/2, -h/2, w, h);

    // main
    ctx.globalAlpha = p.alpha;
    ctx.shadowBlur = 0;
    ctx.drawImage(img, -w/2, -h/2, w, h);

    ctx.restore();
  }

  // keep density to targetCount
  if (petals.length < targetCount) {
    const add = Math.min(6, targetCount - petals.length);
    for (let k=0; k<add; k++) petals.push(newPetal(true));
  }

  requestAnimationFrame(frame);
}
requestAnimationFrame(frame);
</script>

</body>
</html>
